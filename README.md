# Проект для создания клиентов и договоров

Этот проект представляет собой веб-приложение на Flask, предназначенное для создания клиентов и договоров с использованием базы данных Oracle.

## Оглавление

- [Описание](#описание)
- [Требования](#требования)
- [Установка](#установка)
- [Использование](#использование)
- [Структура проекта](#структура-проекта)


## Описание

Проект позволяет создавать клиентов и договоры, а также просматривать логи действий пользователей. Основные функции включают:

- Создание нового клиента с уникальными данными.
- Создание договора для существующего клиента.
- Просмотр логов действий пользователей.
- Обновление параметров подключения к базе данных.

## Требования

Для корректной работы проекта необходимо использовать Python 3.7 32-битный. Это связано с тем, что некоторые библиотеки и зависимости, используемые в проекте, могут быть несовместимы с 64-битной версией Python или другими версиями Python.

Если вы хотите использовать Python версии 3+, вам придется обновить `pip install werkzeug==2.0.3` и установить Microsoft C++ Build Tools.

### Установка Microsoft C++ Build Tools

1. Перейдите на официальную страницу загрузки: [Microsoft Visual C++ Build Tools](https://visualstudio.microsoft.com/visual-cpp-build-tools/).
2. Нажмите "Download Build Tools" (Скачать Build Tools).
3. Запустите скачанный установщик (vs_BuildTools.exe).
4. В установщике выберите "Desktop development with C++" (Разработка настольных приложений на C++).
5. В списке компонентов убедитесь, что выбраны:
   - MSVC v143 - VS 2022 C++ x64/x86 build tools (или более новая версия).
   - Windows 10 SDK (или более новая версия).
   - C++ CMake tools for Windows (опционально, но полезно для некоторых пакетов).
6. Нажмите "Install" (Установить) и дождитесь завершения установки.

### Установка Oracle Client

Для работы с базой данных Oracle необходимо установить Oracle Client 18.0.0 64-битной версии.

1. Перейдите на официальную страницу загрузки: [Oracle Instant Client](https://www.oracle.com/database/technologies/instant-client/downloads.html).
2. Скачайте Oracle Instant Client 18.0.0 64-битной версии.
3. Распакуйте скачанный архив в удобное место на вашем компьютере.
4. Добавьте путь к распакованному каталогу в переменную окружения `PATH`.

## Установка

1. **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/Piton2306/Auto_Client.git
    cd Auto_Client
    ```

2. **Создайте виртуальное окружение и активируйте его:**

    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Windows: venv\Scripts\activate
    ```

3. **Установите зависимости:**

    ```bash
    pip install -r requirements.txt --proxy http://your_proxy\:port
    ```

4. **Настройте параметры подключения к базе данных:**

    Создайте файл `connection_parameters.ini` в корне проекта и добавьте в него параметры подключения к вашей базе данных Oracle. Пример содержимого файла:

    ```ini
    [CONN_PARAM]
    schemaname = ваше_имя_схемы
    password = ваш_пароль
    servername = ваш_сервер

    [AGREE_PARAM]
    id_group_card = ваш_id_группы_карт
    agreetype = ваш_тип_соглашения
    ```

5. **Запустите приложение:**

    ```bash
    python app.py
    ```

## Использование

1. **Откройте браузер и перейдите по адресу:**

    ```
    http://127.0.0.1:5000/
    ```

2. **На главной странице вы можете:**

    - Обновить параметры подключения к базе данных.
    - Создать нового клиента.
    - Создать договор для существующего клиента.
    - Просмотреть логи действий пользователей.

## Структура проекта

- `app.py`: Основной файл приложения Flask.
- `logging_config.py`: Конфигурация логирования.
- `static/`: Папка для статических файлов (CSS, JavaScript).
  - `styles.css`: Файл стилей.
  - `scripts.js`: Файл скриптов.
- `templates/`: Папка для шаблонов HTML.
  - `index.html`: Главная страница.
  - `view_log.html`: Страница просмотра логов.
  - `open_log.html`: Страница открытия логов.
  - `agreement_created.html`: Страница подтверждения создания договора.
  - `client_created.html`: Страница подтверждения создания клиента.
- `requirements.txt`: Файл с зависимостями проекта.
- `connection_parameters.ini`: Файл с параметрами подключения к базе данных.
- `creation_client.py`: Файл с функциями для создания клиентов.
- `list_of_dict.py`: Файл со списком фамилий, имен и отчеств.
- `plsql_queries.py`: Файл с PL/SQL запросами.
- `run_app.bat`: Скрипт для запуска приложения на Windows.
